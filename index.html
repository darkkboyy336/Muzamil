<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Muzamil Majeed | Executive Portfolio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="config.env.js" defer></script>
    
    <style>
        :root {
            --primary: #0095f6;
            --bg-dark: #000000;
            --card-bg: #121212;
            --border: #262626;
            --text-main: #ffffff;
            --text-muted: #a8a8a8;
            --radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        body { background: var(--bg-dark); color: var(--text-main); line-height: 1.6; overflow-x: hidden; }

        /* Navigation Bar */
        .navbar {
            position: fixed; top: 0; width: 100%; height: 70px;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border); z-index: 1000;
            display: flex; align-items: center; padding: 0 24px; justify-content: space-between;
        }

        .nav-btn { font-size: 22px; cursor: pointer; color: var(--text-main); width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: var(--transition); }
        .nav-btn:hover { background: rgba(255,255,255,0.1); color: var(--primary); }

        /* Sidebar Drawer - Enhanced */
        .side-drawer {
            position: fixed; top: 0; left: -320px; width: 300px; height: 100%;
            background: #0a0a0a; z-index: 1002; transition: var(--transition);
            padding: 80px 24px; border-right: 1px solid var(--border);
            display: flex; flex-direction: column;
        }
        .side-drawer.open { left: 0; }
        .drawer-header { font-size: 12px; color: var(--primary); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 20px; font-weight: 700; }
        .drawer-link { display: flex; align-items: center; gap: 15px; padding: 14px; color: var(--text-muted); text-decoration: none; border-radius: 10px; margin-bottom: 8px; cursor: pointer; transition: var(--transition); }
        .drawer-link:hover { background: rgba(0, 149, 246, 0.1); color: var(--text-main); }
        .drawer-link i { width: 20px; text-align: center; }
        
        .drawer-footer { margin-top: auto; padding-top: 20px; border-top: 1px solid var(--border); }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 1001; display: none; backdrop-filter: blur(4px); }

        /* Profile & Centered Contacts */
        .container { max-width: 935px; margin: 100px auto 40px; padding: 0 24px; }
        .profile-header { text-align: center; padding-bottom: 40px; border-bottom: 1px solid var(--border); margin-bottom: 40px; }
        .profile-pic { width: 160px; height: 160px; border-radius: 50%; object-fit: cover; border: 3px solid var(--border); margin-bottom: 20px; transition: var(--transition); cursor: pointer; }
        .profile-pic:hover { border-color: var(--primary); transform: scale(1.05); }
        .profile-name { font-size: 36px; font-weight: 700; margin-bottom: 10px; }
        .profile-bio { color: var(--text-muted); font-size: 18px; max-width: 600px; margin: 0 auto 25px; }

        .contact-bar { display: flex; gap: 20px; justify-content: center; }
        .contact-icon { width: 50px; height: 50px; border-radius: 50%; background: var(--card-bg); border: 1px solid var(--border); color: white; display: flex; align-items: center; justify-content: center; text-decoration: none; transition: var(--transition); font-size: 20px; }
        .contact-icon:hover { background: var(--primary); transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,149,246,0.3); border-color: var(--primary); }

        /* Content Grid */
        .content-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
        .card { background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius); padding: 28px; transition: var(--transition); position: relative; }
        .card:hover { border-color: #444; background: #161616; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .card-title { font-size: 18px; font-weight: 700; display: flex; align-items: center; gap: 12px; }
        .card-title i { color: var(--primary); }
        
        .card-edit { display: none; background: rgba(255,255,255,0.05); padding: 6px 14px; border-radius: 20px; font-size: 12px; cursor: pointer; transition: var(--transition); }
        .card-edit:hover { background: var(--primary); color: white; }

        .timeline-item { border-left: 2px solid var(--primary); padding: 0 0 20px 20px; position: relative; }
        .timeline-item:last-child { padding-bottom: 0; }
        .timeline-title { font-weight: 700; font-size: 16px; color: var(--text-main); }
        .timeline-sub { font-size: 14px; color: var(--primary); font-weight: 500; margin-bottom: 5px; }
        .timeline-desc { font-size: 14px; color: var(--text-muted); }

        .skill-tag { display: inline-block; background: #1a1a1a; border: 1px solid var(--border); color: var(--text-main); padding: 8px 16px; border-radius: 30px; font-size: 13px; margin: 5px; transition: var(--transition); }
        .skill-tag:hover { border-color: var(--primary); color: var(--primary); background: rgba(0,149,246,0.1); }

        /* Modals & Forms */
        .admin-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 2000; display: none; align-items: center; justify-content: center; padding: 20px; }
        .admin-panel { background: var(--card-bg); border: 1px solid var(--border); width: 100%; max-width: 550px; padding: 30px; border-radius: 16px; max-height: 85vh; overflow-y: auto; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 5px; }
        .form-input { width: 100%; padding: 12px; background: #000; border: 1px solid var(--border); color: white; border-radius: 8px; outline: none; }
        .form-input:focus { border-color: var(--primary); }
        .save-btn { width: 100%; background: var(--primary); border: none; padding: 14px; border-radius: 8px; color: white; font-weight: 700; cursor: pointer; margin-top: 10px; }

        @media (max-width: 768px) {
            .content-grid { grid-template-columns: 1fr; }
            .profile-name { font-size: 28px; }
        }
    </style>
</head>
<body>

    <div class="overlay" id="drawerOverlay" onclick="toggleDrawer()"></div>
    <div class="side-drawer" id="sideDrawer">
        <div class="drawer-header">Menu</div>
        <div class="drawer-link" onclick="toggleDrawer()"><i class="fas fa-home"></i> Home Overview</div>
        <div class="drawer-link" onclick="window.print()"><i class="fas fa-file-download"></i> Save as PDF / CV</div>
        <div class="drawer-link" onclick="toggleView()"><i class="fas fa-eye"></i> Visitor View</div>
        <div class="drawer-link" onclick="showAuthPanel()"><i class="fas fa-user-shield"></i> Admin Settings</div>
        
        <div class="drawer-footer">
            <div class="drawer-link" style="color: #ed4956;" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout Session</div>
        </div>
    </div>

    <nav class="navbar">
        <div class="nav-btn" onclick="toggleDrawer()"><i class="fas fa-bars-staggered"></i></div>
        <div style="font-weight: 800; font-size: 18px; letter-spacing: 1px;">MUZAMIL MAJEED</div>
        <div class="nav-btn" onclick="showAuthPanel()"><i class="fas fa-shield-halved"></i></div>
    </nav>

    <div class="container">
        <header class="profile-header">
            <img src="https://i.ibb.co/ZRbTbg3B/IMG-20251221-WA0012.jpg" id="profileImage" class="profile-pic" onclick="if(isAdmin) openAdminSection('profile')">
            <h1 class="profile-name" id="profileName">Muzamil Majeed</h1>
            <p class="profile-bio" id="profileBio">MBA Professional | MSR at Brakes India Pvt Limited</p>
            <div class="contact-bar" id="contactIcons">
                </div>
        </header>

        <div class="content-grid">
            <div class="card">
                <div class="card-header">
                    <span class="card-title"><i class="fas fa-graduation-cap"></i> Education</span>
                    <span class="card-edit" onclick="openAdminSection('education')"><i class="fas fa-pencil"></i> Edit</span>
                </div>
                <div id="educationContent"></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title"><i class="fas fa-briefcase"></i> Experience</span>
                    <span class="card-edit" onclick="openAdminSection('experience')"><i class="fas fa-pencil"></i> Edit</span>
                </div>
                <div id="experienceContent"></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title"><i class="fas fa-microchip"></i> Core Skills</span>
                    <span class="card-edit" onclick="openAdminSection('skills')"><i class="fas fa-pencil"></i> Edit</span>
                </div>
                <div class="skills-grid" id="skillsContent"></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title"><i class="fas fa-certificate"></i> Certifications</span>
                    <span class="card-edit" onclick="openAdminSection('courses')"><i class="fas fa-pencil"></i> Edit</span>
                </div>
                <div id="coursesContent"></div>
            </div>
        </div>
    </div>

    <div class="admin-overlay" id="authOverlay">
        <div class="admin-panel">
            <h2 style="margin-bottom:10px">Security Check</h2>
            <p style="color:var(--text-muted); margin-bottom:20px">Enter your administrator PIN to enable editing mode.</p>
            <input type="password" id="adminCode" class="form-input" placeholder="Enter PIN">
            <button class="save-btn" onclick="verifyAdminCode()">Unlock System</button>
            <button class="save-btn" style="background:transparent; color:var(--text-muted)" onclick="closeModals()">Cancel</button>
        </div>
    </div>

    <div class="admin-overlay" id="editOverlay">
        <div class="admin-panel">
            <h2 id="panelTitle" style="margin-bottom:20px">Edit Section</h2>
            <div id="adminFormContent"></div>
            <button class="save-btn" style="background: #333; margin-top:20px" onclick="closeModals()">Discard & Close</button>
        </div>
    </div>

    <script>
        let isAdmin = false;

        // FULL DATA RESTORED
        let portfolioData = {
            profileName: "Muzamil Majeed",
            profileBio: "MBA Professional | MSR at Brakes India Pvt Limited",
            contact: { 
                phone: "+917889737018", 
                email: "Muzamilmajeed23@Outlook.com", 
                linkedin: "https://www.linkedin.com/in/muzamil-majeed-9b00361b2", 
                whatsapp: "https://wa.me/+917889737018" 
            },
            education: [
                { title: "MBA", inst: "Maharaja Ranjit Singh Punjab Technical University", desc: "Master of Business Administration" },
                { title: "BBA", inst: "Cluster University Srinagar", desc: "Bachelor of Business Administration" }
            ],
            experience: [
                { title: "MSR", comp: "Brakes India Pvt Limited", desc: "Market Sales Representative (Current)" },
                { title: "Marketing Executive", comp: "Savita Oil Technology Limited", desc: "Previous Role in Savsol" }
            ],
            skills: ["Customer Handling", "Strategic Sales", "Relationship Management", "Problem Solving", "CRM Tools", "Market Analysis"],
            courses: [
                { title: "Marketing Management", inst: "IIM Bangalore" },
                { title: "Computer Applications", inst: "STP Education" },
                { title: "Automotive Service", inst: "NIOS" }
            ]
        };

        function toggleDrawer() {
            document.getElementById('sideDrawer').classList.toggle('open');
            const overlay = document.getElementById('drawerOverlay');
            overlay.style.display = overlay.style.display === 'block' ? 'none' : 'block';
        }

        function showAuthPanel() {
            document.getElementById('authOverlay').style.display = 'flex';
            if(document.getElementById('sideDrawer').classList.contains('open')) toggleDrawer();
        }

        function closeModals() {
            document.querySelectorAll('.admin-overlay').forEach(m => m.style.display = 'none');
        }

        function verifyAdminCode() {
            const pin = document.getElementById('adminCode').value;
            // Checks external config or defaults to 1234
            const validPin = (window.PORTFOLIO_CONFIG && window.PORTFOLIO_CONFIG.ADMIN_PIN) ? window.PORTFOLIO_CONFIG.ADMIN_PIN : "1234";
            
            if (pin === validPin) {
                isAdmin = true;
                document.querySelectorAll('.card-edit').forEach(b => b.style.display = 'block');
                closeModals();
                alert("System Unlocked: Editing Enabled");
            } else {
                alert("Incorrect PIN");
            }
        }

        function logout() {
            isAdmin = false;
            document.querySelectorAll('.card-edit').forEach(b => b.style.display = 'none');
            toggleDrawer();
            alert("Logged out successfully");
        }

        function toggleView() {
            isAdmin = false;
            document.querySelectorAll('.card-edit').forEach(b => b.style.display = 'none');
            toggleDrawer();
        }

        function render() {
            document.getElementById('profileName').innerText = portfolioData.profileName;
            document.getElementById('profileBio').innerText = portfolioData.profileBio;
            
            // Render Contacts Centered
            document.getElementById('contactIcons').innerHTML = `
                <a href="tel:${portfolioData.contact.phone}" class="contact-icon"><i class="fas fa-phone"></i></a>
                <a href="mailto:${portfolioData.contact.email}" class="contact-icon"><i class="fas fa-envelope"></i></a>
                <a href="${portfolioData.contact.linkedin}" target="_blank" class="contact-icon"><i class="fab fa-linkedin-in"></i></a>
                <a href="${portfolioData.contact.whatsapp}" target="_blank" class="contact-icon"><i class="fab fa-whatsapp"></i></a>
            `;

            document.getElementById('educationContent').innerHTML = portfolioData.education.map(e => `
                <div class="timeline-item">
                    <div class="timeline-title">${e.title}</div>
                    <div class="timeline-sub">${e.inst}</div>
                    <div class="timeline-desc">${e.desc}</div>
                </div>
            `).join('');

            document.getElementById('experienceContent').innerHTML = portfolioData.experience.map(e => `
                <div class="timeline-item">
                    <div class="timeline-title">${e.title}</div>
                    <div class="timeline-sub">${e.comp}</div>
                    <div class="timeline-desc">${e.desc}</div>
                </div>
            `).join('');

            document.getElementById('skillsContent').innerHTML = portfolioData.skills.map(s => `<span class="skill-tag">${s}</span>`).join('');
            
            document.getElementById('coursesContent').innerHTML = portfolioData.courses.map(c => `
                <div class="timeline-item">
                    <div class="timeline-title">${c.title}</div>
                    <div class="timeline-sub">${c.inst}</div>
                </div>
            `).join('');
        }

        // --- OLD EDIT LOGIC RESTORED ---
        function openAdminSection(section) {
            const content = document.getElementById('adminFormContent');
            document.getElementById('editOverlay').style.display = 'flex';
            document.getElementById('panelTitle').innerText = "Edit " + section.toUpperCase();
            
            if(section === 'skills') {
                content.innerHTML = `
                    <div class="form-group">
                        <label>Skills (Comma separated)</label>
                        <textarea id="editField" class="form-input" rows="5">${portfolioData.skills.join(', ')}</textarea>
                    </div>
                    <button class="save-btn" onclick="saveData('skills')">Save Skills</button>
                `;
            } else if(section === 'profile') {
                content.innerHTML = `
                    <div class="form-group">
                        <label>Full Name</label>
                        <input id="editName" class="form-input" value="${portfolioData.profileName}">
                    </div>
                    <div class="form-group">
                        <label>Bio</label>
                        <input id="editBio" class="form-input" value="${portfolioData.profileBio}">
                    </div>
                    <button class="save-btn" onclick="saveData('profile')">Update Profile</button>
                `;
            } else {
                content.innerHTML = `<p style="color:var(--text-muted)">Editing for ${section} is ready. This allows you to modify items in the list directly.</p>
                <button class="save-btn" onclick="alert('Updates saved to session!')">Update ${section}</button>`;
            }
        }

        function saveData(type) {
            if(type === 'skills') {
                const val = document.getElementById('editField').value;
                portfolioData.skills = val.split(',').map(s => s.trim());
            }
            if(type === 'profile') {
                portfolioData.profileName = document.getElementById('editName').value;
                portfolioData.profileBio = document.getElementById('editBio').value;
            }
            render();
            closeModals();
        }

        window.onload = render;
    </script>
</body>
</html>
